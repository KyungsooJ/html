<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ex06.html</title>
    <style>
        body {
            overflow: hidden;
        }
        .box {
            width: 800px;
            height: 400px;
            border: 2px solid black;
            position: relative;
            overflow: hidden;
        }
        .danbi {
            width: 100px;
            height: 100px;
            background-image: url('img/danbi.jpg');
            background-size: auto 100%;
            position: absolute;
            top: 0;
            left: 0;
            transition-duration: 0.5s;
        }
    </style>
</head>
<body>
    <h1>스크립트로 키보드 이벤트 연결</h1>
    <hr>
    
    <div class="box">
        <div class="danbi" style="top: 0; left: 0;"></div>
    </div>

    <script>
        const box = document.querySelector('div.box')

        // event는 java의 this와 같다
        const keyHandler = function(event) { /* 함수가 실행 될 때*/
            const danbi = document.querySelector('div.danbi') /* 단비를 가져온다*/
            const top = danbi.style.top
            const left = danbi.style.left

            // 문자열 앞에 +기호를 붙이면 숫자로 형변환된다
            // Integer.parseInt('1234')
            const t = +top.replace('px', '')
            const l = +left.replace('px', '')




            switch(event.key) {
                case 'ArrowDown':
                    danbi.style.top = t + 50 + 'px'
                    if(t + 50 > box.clientHeight - 100) 
                    danbi.style.top = box.clientHeight - 100 + 'px'
                    break;

                case 'ArrowUp':
                    danbi.style.top = t - 50 + 'px'
                    if(t < 50) danbi.style.top = '0'
                    break;

                case 'ArrowLeft':
                    danbi.style.left = l - 50 + 'px'
                    if(l < 50) danbi.style.left = '0'
                    break;

                case 'ArrowRight':
                    danbi.style.left = l + 50 + 'px'
                    if(l + 150 > box.clientWidth)
                        danbi.style.left = box.clientWidth - 100 + 'px'

                    break;
                    // 스페이스바 누를 때 움직이게하기
                case ' ':
                case 'Space':
                    // danbi.style.top = t + 5 + 'px' // 스페이스바 누르면 위로 이동
                    // danbi.style.left = l + 10 + 'px
                    const computedStyle = getComputedStyle(danbi);
                    const currentWidth = parseFloat(computedStyle.width);
                    const currentHeight = parseFloat(computedStyle.height);
                    const newWidth = currentWidth * 1.5;
                    const newHeight = currentHeight * 1.5;
                    danbi.style.transform = `scale(1.5)`;
                    danbi.style.width = `${newWidth}px`;
                    danbi.style.height = `${newHeight}px`;
                    break;               
            }
            console.log(danbi.style.top, danbi.style.left)

            
            
        }    
        
        // 웨어서 준비한 함수를 문서의 keydown 이벤트에 연결한다 (함수연결)
        document.onkeydown = keyHandler /* 없으면 키보드 핸들러 이용 불가능*/

        // HTML요소를 불러와서 객체형식으로 출력하면 내부 속성을 확인할 수 있다
        const danbiElement = document.querySelector('.danbi')
        console.log({danbiElement: danbiElement})
    </script>
    
</body>
</html>